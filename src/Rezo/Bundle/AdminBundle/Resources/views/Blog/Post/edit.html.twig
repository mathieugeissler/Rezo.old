{% extends 'AvanzuAdminThemeBundle:layout:base-layout.html.twig' %}

{% block page_title %} Posts {% endblock %}
{% block page_subtitle %} control {% endblock %}

{% block page_content %}
    <div class="row">
        <div class="col-md-4">


        </div>
        <div class="col-md-4">

        </div>
        <div class="col-md-4">

        </div>
    </div>

    <div class="row">
        <div class="col-md-6">

            <div class="box box-primary">
                <div class="box-header">
                    <h3 class="box-title">Add or edit a post</h3>
                </div>
                <div class="box-body">
                    {{ form_start(form) }}
                    {{ form_widget(form) }}
                </div>
                <div class="box-footer clearfix">
                    <button type="reset" class="btn btn-warning pull-left"><i class="fa fa-times"></i> Cancel</button>
                    <button id="submit" type="submit" class="btn btn-primary pull-right"><i class="fa fa-check-square"></i> Submit
                    </button>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
        <div class="col-md-6">
            <div class="box box-default">
                <div class="box-header with-border">
                    <h3 class="box-title">Posts list</h3>

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse">
                            <i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i
                                    class="fa fa-times"></i></button>
                    </div>
                    <!-- /.box-tools -->
                </div>
                <!-- /.box-header -->
                <div class="box-body table-responsive no-padding">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <td>Post ID</td>
                                <td>Title</td>
                                <td>Author</td>
                                <td>Status</td>
                                <td>Action</td>
                            </tr>
                            </thead>
                            <tbody id="postsList">

                            </tbody>
                        </table>
                </div>
                <!-- /.box-body -->
                <div class="box-footer clearfix">
                    <ul class="pagination pagination-sm no-margin pull-right">
                        <li><a href="#" >Â«</li>
                    </ul>
                </div>
                <div class="overlay">
                    <i class="fa fa-refresh fa-spin"></i>
                </div>
            </div>
            <!-- /.box -->
        </div>
    </div>
{% endblock %}

   {% block javascripts_inline %}
       <script>
           $(document).ready(function () {
               $.ajax({
                   type: 'POST',
                   dataType: 'json',
                   url: '{{ path('admin_blog_post_findAll') }}',
                   success: function (data) {
                       $('#postsList').html(data.vue);
                       $('.overlay').addClass('hidden');
                   }
               });

               $('#PostType').on('submit', function(e) {
                   e.preventDefault();

                   var $this = $(this);

                   $.ajax({
                       type: $this.attr('method'),
                       url: $this.attr('action'),
                       dataType: 'json',
                       success: function (html) {
                           console.log(html);
                       }
                   });

               });

           });
       </script>
   {% endblock %}

